# 热点数据功能接口文档

本文档介绍热点数据功能的API接口设计，供前端开发人员对接使用。

## 1. 获取热点话题列表

获取系统中的热点话题列表，默认按浏览量和发布时间排序。

**请求方法**: GET

**URL**: `/api/hot-topics`

**请求参数**:

| 参数名 | 类型 | 必填 | 说明 |
|-------|------|------|------|
| limit | int | 否 | 返回结果数量限制，默认20，最小1，最大50 |

**成功响应示例**:

```json
[
  {
    "id": "78c0d9b3-c7a4-4596-b1f5-0a3d262cfe5b",
    "title": "DeepSeek R2来了？全新推理时Scaling论文联手清华震撼发布",
    "source": "36氪创投",
    "url": "https://www.36kr.com/p/3235677673865217",
    "published_at": "2025-04-04T10:23:25",
    "created_at": "2025-04-04T20:00:08.673798",
    "view_count": 0
  },
  // ... 更多热点话题
]

## 2. 使用热点话题发起对话

复用现有的聊天接口，通过添加topic_id参数发起基于热点话题的对话。

**请求方法**: POST

**URL**: `/api/chat/send`

**请求参数**:

| 参数名 | 类型 | 必填 | 说明 |
|-------|------|------|------|
| provider | string | 是 | AI提供商，如"qwen" |
| model | string | 是 | 模型名称，如"qwen-max" |
| message | string | 否 | 用户消息，可为空字符串 |
| conversation_id | string | 否 | 会话ID，为空则创建新会话 |
| stream | boolean | 否 | 是否使用流式响应，默认true |
| options | object | 否 | 其他选项 |
| file_ids | array | 否 | 关联的文件ID列表 |
| topic_id | string | 否 | 热点话题的ID |

**请求示例**:

```json
{
  "provider": "qwen",
  "model": "qwen-max",
  "message": "请解释一下这条新闻的背景和意义",
  "conversation_id": uuid,
  "stream": true,
  "options": null,
  "file_ids": null,
  "topic_id": "f8e7d6c5-b4a3-2c1d-0e9f-8g7h6i5j4k3l"
}
```

**成功响应示例**:

```json
{
  "id": "a1b2c3d4-e5f6-7g8h-9i0j-k1l2m3n4o5p6",
  "provider": "qwen",
  "model": "qwen-max",
  "message": {
    "id": "msg123456",
    "role": "assistant",
    "content": "这条新闻介绍了'妙语智能交互系统'，这是一种新型的车载AI交互系统...",
    "created_at": "2025-04-04T17:45:22"
  },
  "conversation_id": "conv987654",
  "created_at": "2025-04-04T17:45:22"
}
```

## 3. 手动刷新热点数据（管理功能）

手动触发热点数据更新，通常用于管理界面。

**请求方法**: POST

**URL**: `/api/hot-topics/refresh`

**请求参数**:

| 参数名 | 类型 | 必填 | 说明 |
|-------|------|------|------|
| force | boolean | 否 | 是否强制更新，忽略时间间隔限制，默认false |

**成功响应示例**:

```json
{
  "status": "success",
  "message": "热点话题刷新操作已完成"
}
```

## 前端实现建议

1. **热点详情与交互**：
   - 用户点击热点话题卡片后，启动带有该话题ID的聊天

2. **刷新机制**：
   - 添加一个"刷新"的svg按钮，允许用户手动触发热点数据更新
   - 考虑实现定时自动刷新功能，如每小时刷新一次页面数据

## 注意事项

1. 热点数据每小时自动更新一次，前端可以设置定时刷新来获取最新数据
2. 使用话题发起对话时，系统会自动为话题增加浏览计数
3. 从热点话题发起的对话会创建新的会话，并自动生成基于话题内容的会话标题

以上接口文档应满足前端开发对接热点数据功能的需求。如有疑问或需要更多信息，请与后端开发团队联系。